<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BỘ ĐỀ ÔN IOE K6 SỐ: 01.2</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .word-block {
            user-select: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans antialiased text-gray-800">
    <div id="root"></div>

    <script type="text/babel">
        // All React components and data are bundled into this single script tag.
        
        // --- DỮ LIỆU CÂU HỎI IOE LỚP 6 (ĐỀ SỐ 01.2) ---
        const questions = [
            {
                type: 'rearrange',
                question: '1. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['I', 'books.', 'much time', 'don’t have', 'to read'],
                correctAnswer: 'I don’t have much time to read books.',
                correctAnswer_vi: 'Tôi không có nhiều thời gian để đọc sách.',
                hint_vi: 'Cấu trúc phủ định thì hiện tại đơn: S + don\'t have...',
                rationale_vi: 'Cấu trúc câu: Chủ ngữ (I) + trợ động từ phủ định (don’t have) + tân ngữ (much time) + động từ nguyên mẫu có to (to read books).',
                rationale_en: 'The structure is: Subject + negative auxiliary + object + to-infinitive phrase.',
            },
            {
                type: 'mc',
                question: '2. What is the date today?',
                options: [
                    { text: 'A. It’s Sunday.', isCorrect: false },
                    { text: 'B. It’s my best day.', isCorrect: false },
                    { text: 'C. It’s my birthday.', isCorrect: false },
                    { text: 'D. It’s the twentieth of February.', isCorrect: true }
                ],
                correctAnswer: 'D. It’s the twentieth of February.',
                correctAnswer_vi: 'Hôm nay là ngày 20 tháng Hai.',
                hint_vi: 'Câu hỏi về ngày tháng (date) cần có cả ngày và tháng trong câu trả lời.',
                rationale_vi: 'Câu hỏi "What is the date...?" (Hôm nay là ngày mấy?) cần một câu trả lời chỉ rõ ngày và tháng.',
                rationale_en: 'A question asking for the "date" requires an answer with both the day and the month.',
            },
            {
                type: 'rearrange',
                question: '3. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['lived in', '10 years.', 'for', 'Ho Chi Minh City', 'I have'],
                correctAnswer: 'I have lived in Ho Chi Minh City for 10 years.',
                correctAnswer_vi: 'Tôi đã sống ở Thành phố Hồ Chí Minh được 10 năm.',
                hint_vi: 'Thì hiện tại hoàn thành (have + V3/Ved) với "for" + khoảng thời gian.',
                rationale_vi: 'Cấu trúc thì hiện tại hoàn thành: Chủ ngữ (I) + have lived + nơi chốn (in Ho Chi Minh City) + khoảng thời gian (for 10 years).',
                rationale_en: 'Present perfect tense structure: Subject + have + past participle + place + for + period of time.',
            },
            {
                type: 'mc',
                question: '4. What ... lovely room you have!',
                options: [
                    { text: 'A. this', isCorrect: false },
                    { text: 'B. a', isCorrect: true },
                    { text: 'C. that', isCorrect: false },
                    { text: 'D. the', isCorrect: false }
                ],
                correctAnswer: 'B. a',
                correctAnswer_vi: 'một',
                hint_vi: 'Cấu trúc câu cảm thán: What + a/an + adj + N!',
                rationale_vi: 'Đây là câu cảm thán với danh từ đếm được số ít ("room"), cấu trúc đúng là "What a + tính từ + danh từ!".',
                rationale_en: 'This is an exclamatory sentence with a singular countable noun, so the structure is "What a + adj + N!".',
            },
            {
                type: 'multimedia',
                question: '5. It was very long and thin and it looks like a _ _ _ _ _ .',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2014/3/14/635303882975492747_Audio.mp3',
                audioContent: 'It looks like a snake.',
                correctAnswer: 'snake',
                correctAnswer_vi: 'con rắn',
                hint_vi: 'Tên một loài bò sát dài và không chân. (5 ký tự)',
                rationale_vi: 'Nội dung audio mô tả một vật trông giống như một con rắn (snake).',
                rationale_en: 'The audio describes something that looks like a snake.',
            },
            {
                type: 'fill-in-the-blank',
                question: '6. It’s a_ _ _ _ _ hot in summer in Hanoi.',
                correctAnswer: 'lways',
                correctAnswer_vi: 'luôn luôn (always)',
                hint_vi: 'Trạng từ chỉ tần suất "luôn luôn". (5 ký tự)',
                rationale_vi: 'Từ cần điền là "always" (luôn luôn) để chỉ một sự thật hiển nhiên về thời tiết mùa hè ở Hà Nội.',
                rationale_en: 'The missing letters complete the adverb of frequency "always".',
            },
            {
                type: 'mc',
                question: '7. I ______ her five times last night, but she ______.',
                options: [
                    { text: 'A. have phoned – hasn’t answered', isCorrect: false },
                    { text: 'B. phoned – doesn’t answer', isCorrect: false },
                    { text: 'C. have phoned – didn’t answer', isCorrect: false },
                    { text: 'D. phoned – didn’t answer', isCorrect: true }
                ],
                correctAnswer: 'D. phoned – didn’t answer',
                correctAnswer_vi: 'đã gọi - đã không trả lời',
                hint_vi: '"last night" là dấu hiệu của thì quá khứ đơn.',
                rationale_vi: 'Trạng từ "last night" (tối qua) chỉ một thời điểm đã kết thúc trong quá khứ, do đó cả hai động từ đều phải chia ở thì quá khứ đơn.',
                rationale_en: 'The adverb "last night" indicates a finished time in the past, so both verbs must be in the simple past tense.',
            },
            {
                type: 'multimedia',
                question: '8. The bag is behind the _ _ _ _ .',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2017/3/2/636240649551064378_Audio.mp3',
                audioContent: 'The bag is behind the door.',
                correctAnswer: 'door',
                correctAnswer_vi: 'cái cửa',
                hint_vi: 'Tên một vật dụng trong nhà. (4 ký tự)',
                rationale_vi: 'Nội dung audio cho biết vị trí của cái túi là ở sau cánh cửa (door).',
                rationale_en: 'The audio states that the bag is behind the door.',
            },
            {
                type: 'rearrange',
                question: '9. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['We need', 'to join', 'game.', 'five students', 'this'],
                correctAnswer: 'We need five students to join this game.',
                correctAnswer_vi: 'Chúng tôi cần năm học sinh để tham gia trò chơi này.',
                hint_vi: 'Cấu trúc: S + need + O + to V.',
                rationale_vi: 'Cấu trúc: Chủ ngữ (We) + động từ (need) + tân ngữ (five students) + động từ nguyên mẫu có to chỉ mục đích (to join this game).',
                rationale_en: 'Structure: Subject + verb + object + to-infinitive of purpose.',
            },
            {
                type: 'mc',
                question: '10. Which sentence is correct?',
                options: [
                    { text: 'A. They don’t need any help.', isCorrect: true },
                    { text: 'B. They need any help.', isCorrect: false },
                    { text: 'C. They don’t need to any help.', isCorrect: false },
                    { text: 'D. They need not any help.', isCorrect: false }
                ],
                correctAnswer: 'A. They don’t need any help.',
                correctAnswer_vi: 'Họ không cần bất kỳ sự giúp đỡ nào.',
                hint_vi: '"Any" thường dùng trong câu phủ định. Cấu trúc phủ định với động từ thường là "don\'t/doesn\'t + V".',
                rationale_vi: 'Câu A là câu đúng ngữ pháp. "Any" được dùng trong câu phủ định. Cấu trúc phủ định đúng là "don\'t need".',
                rationale_en: 'Sentence A is grammatically correct. "Any" is used in negative sentences, and the correct negative structure is "don\'t need".',
            },
            {
                type: 'rearrange',
                question: '11. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['every', 'a', 'bath', 'morning.', 'She takes'],
                correctAnswer: 'She takes a bath every morning.',
                correctAnswer_vi: 'Cô ấy tắm mỗi sáng.',
                hint_vi: 'Thì hiện tại đơn chỉ thói quen: S + V(s/es) + ...',
                rationale_vi: 'Cấu trúc thì hiện tại đơn: Chủ ngữ (She) + động từ (takes) + tân ngữ (a bath) + trạng ngữ thời gian (every morning).',
                rationale_en: 'Simple present tense structure for a routine.',
            },
            {
                type: 'mc',
                question: '12. ... home now. It’s late.',
                options: [
                    { text: 'A. Going', isCorrect: false },
                    { text: 'B. Goes', isCorrect: false },
                    { text: 'C. Went', isCorrect: false },
                    { text: 'D. Go', isCorrect: true }
                ],
                correctAnswer: 'D. Go',
                correctAnswer_vi: 'Đi về',
                hint_vi: 'Đây là một câu mệnh lệnh/đề nghị.',
                rationale_vi: 'Đây là một câu mệnh lệnh, yêu cầu ai đó đi về nhà. Câu mệnh lệnh bắt đầu bằng một động từ nguyên mẫu (Go).',
                rationale_en: 'This is an imperative sentence (a command), which starts with a base verb (Go).',
            },
            {
                type: 'multimedia',
                question: '13. What does he play?',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2015/3/6/635612507774430768_Audio.mp3',
                audioContent: 'He plays basketball.',
                options: [
                    { text: 'A. baseball', isCorrect: false },
                    { text: 'B. tennis', isCorrect: false },
                    { text: 'C. soccer', isCorrect: false },
                    { text: 'D. basketball', isCorrect: true }
                ],
                correctAnswer: 'D. basketball',
                correctAnswer_vi: 'bóng rổ',
                hint_vi: 'Nghe tên môn thể thao được nhắc đến.',
                rationale_vi: 'Nội dung audio cho biết anh ấy chơi bóng rổ (basketball).',
                rationale_en: 'The audio states that he plays basketball.',
            },
            {
                type: 'mc',
                question: '14. Our team will become famous for ... good at football.',
                options: [
                    { text: 'A. being', isCorrect: true },
                    { text: 'B. be', isCorrect: false },
                    { text: 'C. to be', isCorrect: false },
                    { text: 'D. is be', isCorrect: false }
                ],
                correctAnswer: 'A. being',
                correctAnswer_vi: 'việc giỏi (đá bóng)',
                hint_vi: 'Sau giới từ ("for") là một danh động từ (V-ing).',
                rationale_vi: 'Giới từ "for" yêu cầu một danh từ hoặc danh động từ (gerund) theo sau. Dạng V-ing của "be" là "being".',
                rationale_en: 'A preposition ("for") must be followed by a noun or a gerund (V-ing).',
            },
            {
                type: 'mc',
                question: '15. Is your hair black ... brown? – It’s brown.',
                options: [
                    { text: 'A. but', isCorrect: false },
                    { text: 'B. and', isCorrect: false },
                    { text: 'C. or', isCorrect: true },
                    { text: 'D. is', isCorrect: false }
                ],
                correctAnswer: 'C. or',
                correctAnswer_vi: 'hay/hoặc',
                hint_vi: 'Cần một liên từ để đưa ra sự lựa chọn giữa hai màu.',
                rationale_vi: 'Liên từ "or" được dùng trong câu hỏi để đưa ra sự lựa chọn giữa hai hoặc nhiều khả năng.',
                rationale_en: 'The conjunction "or" is used in questions to offer a choice between two or more options.',
            },
            {
                type: 'mc',
                question: '16. Which sentence is correct?',
                options: [
                    { text: 'A. Bread and some milk have I for breakfast.', isCorrect: false },
                    { text: 'B. I have bread and for some milk breakfast.', isCorrect: false },
                    { text: 'C. I have for breakfast some bread and milk.', isCorrect: false },
                    { text: 'D. I have some bread and milk for breakfast.', isCorrect: true }
                ],
                correctAnswer: 'D. I have some bread and milk for breakfast.',
                correctAnswer_vi: 'Tôi ăn bánh mì và sữa cho bữa sáng.',
                hint_vi: 'Kiểm tra trật tự từ: S + V + O + cụm giới từ.',
                rationale_vi: 'Câu D có trật tự từ đúng theo cấu trúc: Chủ ngữ (I) + Động từ (have) + Tân ngữ (some bread and milk) + Cụm giới từ (for breakfast).',
                rationale_en: 'Sentence D has the correct word order: Subject + Verb + Object + Prepositional Phrase.',
            },
            {
                type: 'rearrange',
                question: '17. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['on', 'a', 'My grandparents', 'farm.', 'live'],
                correctAnswer: 'My grandparents live on a farm.',
                correctAnswer_vi: 'Ông bà tôi sống ở một trang trại.',
                hint_vi: 'Cấu trúc câu khẳng định: S + V + nơi chốn.',
                rationale_vi: 'Thứ tự đúng: Chủ ngữ (My grandparents) + động từ (live) + cụm giới từ chỉ nơi chốn (on a farm).',
                rationale_en: 'The correct order is: Subject + Verb + Prepositional Phrase of place.',
            },
            {
                type: 'mc',
                question: '18. Do you feel ...?',
                options: [
                    { text: 'A. danger', isCorrect: false },
                    { text: 'B. sadly', isCorrect: false },
                    { text: 'C. happily', isCorrect: false },
                    { text: 'D. nervous', isCorrect: true }
                ],
                correctAnswer: 'D. nervous',
                correctAnswer_vi: 'lo lắng',
                hint_vi: 'Sau động từ "feel" là một tính từ.',
                rationale_vi: '"Feel" là một động từ liên kết, theo sau nó là một tính từ để mô tả trạng thái. "Nervous" (lo lắng) là một tính từ.',
                rationale_en: '"Feel" is a linking verb, which is followed by an adjective to describe a state. "Nervous" is an adjective.',
            },
            {
                type: 'mc',
                question: '19. Cinderella lost _______ when running away from the ball.',
                options: [
                    { text: 'A. an earing', isCorrect: false },
                    { text: 'B. a ring', isCorrect: false },
                    { text: 'C. a glove', isCorrect: false },
                    { text: 'D. a shoe', isCorrect: true }
                ],
                correctAnswer: 'D. a shoe',
                correctAnswer_vi: 'một chiếc giày',
                hint_vi: 'Trong truyện cổ tích, Lọ Lem đã đánh rơi vật gì?',
                rationale_vi: 'Theo câu chuyện cổ tích Cinderella (Lọ Lem), cô đã đánh rơi một chiếc giày thủy tinh.',
                rationale_en: 'According to the fairy tale, Cinderella lost a glass shoe.',
            },
            {
                type: 'multimedia',
                question: '20. We will go to the ... next weekend.',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/21/635206395308644010_Audio.mp3',
                audioContent: 'We will go to the beach next weekend.',
                options: [
                    { text: 'A. garden', isCorrect: false },
                    { text: 'B. mountain', isCorrect: false },
                    { text: 'C. kitchen', isCorrect: false },
                    { text: 'D. beach', isCorrect: true }
                ],
                correctAnswer: 'D. beach',
                correctAnswer_vi: 'bãi biển',
                hint_vi: 'Nghe địa điểm họ sẽ đến vào cuối tuần tới.',
                rationale_vi: 'Nội dung audio cho biết họ sẽ đi đến bãi biển (beach).',
                rationale_en: 'The audio says they will go to the beach.',
            },
            {
                type: 'fill-in-the-blank',
                question: '21. The Imperial Academy, or Quoc Tu Giam, is the first _ _ _ _ _ _ _ _ _ _ in Vietnam.',
                correctAnswer: 'university',
                correctAnswer_vi: 'trường đại học',
                hint_vi: 'Quốc Tử Giám là gì đầu tiên ở Việt Nam? (10 ký tự)',
                rationale_vi: 'Quốc Tử Giám được coi là trường đại học đầu tiên của Việt Nam (the first university).',
                rationale_en: 'The Imperial Academy is considered the first university in Vietnam.',
            },
            {
                type: 'rearrange',
                question: '22. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['for', 'lunch?', 'What', 'have', 'do you'],
                correctAnswer: 'What do you have for lunch?',
                correctAnswer_vi: 'Bạn ăn gì cho bữa trưa?',
                hint_vi: 'Câu hỏi Wh-question ở thì hiện tại đơn.',
                rationale_vi: 'Cấu trúc: What + do/does + S + have + for + meal?',
                rationale_en: 'Question structure: What + auxiliary verb + subject + have + for + meal?',
            },
            {
                type: 'fill-in-the-blank',
                question: '23. She decided to participate _ _ her school’s public speaking contest.',
                correctAnswer: 'in',
                correctAnswer_vi: 'tham gia vào',
                hint_vi: 'Động từ "participate" đi với giới từ "in". (2 ký tự)',
                rationale_vi: 'Cụm động từ cố định là "participate in" (tham gia vào).',
                rationale_en: 'The fixed phrasal verb is "participate in".',
            },
            {
                type: 'mc',
                question: '24. ... go to the beach for our holiday.',
                options: [
                    { text: 'A. Let’s', isCorrect: true },
                    { text: 'B. It’s', isCorrect: false },
                    { text: 'C. We’re', isCorrect: false },
                    { text: 'D. That’s', isCorrect: false }
                ],
                correctAnswer: 'A. Let’s',
                correctAnswer_vi: 'Chúng ta hãy',
                hint_vi: 'Cấu trúc dùng để đưa ra lời đề nghị, gợi ý.',
                rationale_vi: '"Let\'s" (Let us) được dùng để đưa ra một lời đề nghị, theo sau là một động từ nguyên mẫu (go).',
                rationale_en: '"Let\'s" is used to make a suggestion, followed by a base verb.',
            },
            {
                type: 'fill-in-the-blank',
                question: '25. There _ _ _ 4 people in my family.',
                correctAnswer: 'are',
                correctAnswer_vi: 'có',
                hint_vi: 'Dùng "There are" với danh từ số nhiều. (3 ký tự)',
                rationale_vi: 'Vì "4 people" là số nhiều nên ta dùng cấu trúc "There are".',
                rationale_en: 'The plural noun "4 people" requires the structure "There are".',
            },
            {
                type: 'mc',
                question: '26. It takes me ... hour to get to the village.',
                options: [
                    { text: 'A. an', isCorrect: true },
                    { text: 'B. a', isCorrect: false },
                    { text: 'C. the', isCorrect: false },
                    { text: 'D. Ø', isCorrect: false }
                ],
                correctAnswer: 'A. an',
                correctAnswer_vi: 'một',
                hint_vi: '"hour" bắt đầu bằng một nguyên âm câm, dùng "an".',
                rationale_vi: 'Từ "hour" bắt đầu bằng âm /aʊər/, là một nguyên âm, do đó phải dùng mạo từ "an".',
                rationale_en: 'The word "hour" begins with a vowel sound (/aʊər/), so it requires the article "an".',
            },
            {
                type: 'rearrange',
                question: '27. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['car to office.', 'drive my', 'I often', 'leave home', 'at 7 and'],
                correctAnswer: 'I often leave home at 7 and drive my car to office.',
                correctAnswer_vi: 'Tôi thường rời nhà lúc 7 giờ và lái xe đến văn phòng.',
                hint_vi: 'Câu ghép nối hai hành động thường ngày.',
                rationale_vi: 'Thứ tự logic của các hành động: rời nhà (leave home) rồi mới lái xe (drive). Trạng từ "often" đứng trước động từ thường.',
                rationale_en: 'The logical sequence of actions is leaving home then driving. The adverb "often" precedes the main verb.',
            },
            {
                type: 'rearrange',
                question: '28. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['We', 'the market', 'some shopping.', 'to do', 'go to'],
                correctAnswer: 'We go to the market to do some shopping.',
                correctAnswer_vi: 'Chúng tôi đi chợ để mua sắm.',
                hint_vi: 'Cấu trúc "to do something" chỉ mục đích.',
                rationale_vi: 'Cấu trúc: Chủ ngữ (We) + động từ (go to the market) + cụm từ chỉ mục đích (to do some shopping).',
                rationale_en: 'Structure: Subject + verb phrase + infinitive of purpose.',
            },
            {
                type: 'fill-in-the-blank',
                question: '29. She is good _ _ playing the guitar.',
                correctAnswer: 'at',
                correctAnswer_vi: 'giỏi về',
                hint_vi: 'Cấu trúc "good at + V-ing". (2 ký tự)',
                rationale_vi: 'Cụm từ cố định "be good at" có nghĩa là "giỏi về việc gì đó".',
                rationale_en: 'The fixed expression is "be good at" something.',
            },
            {
                type: 'fill-in-the-blank',
                question: '30. It’s chewing gum. Chew it. Don’t _ _ _ _ _ _ _ it.',
                correctAnswer: 'swallow',
                correctAnswer_vi: 'nuốt',
                hint_vi: 'Hành động trái ngược với nhai. (7 ký tự)',
                rationale_vi: 'Kẹo cao su (chewing gum) là để nhai (chew), không phải để nuốt (swallow).',
                rationale_en: 'Chewing gum is meant to be chewed, not swallowed.',
            },
            {
                type: 'rearrange',
                question: '31. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['football matches', 'watching important', 'on TV.', 'Britain enjoy', 'People in'],
                correctAnswer: 'People in Britain enjoy watching important football matches on TV.',
                correctAnswer_vi: 'Người dân ở Anh thích xem các trận bóng đá quan trọng trên TV.',
                hint_vi: 'Cấu trúc: S + enjoy + V-ing + O.',
                rationale_vi: 'Thứ tự đúng: Chủ ngữ (People in Britain) + động từ (enjoy) + danh động từ (watching) + tân ngữ.',
                rationale_en: 'The correct order is Subject + verb (enjoy) + gerund (watching) + object.',
            },
            {
                type: 'fill-in-the-blank',
                question: '32. TEN_ IS',
                correctAnswer: 'N',
                correctAnswer_vi: 'N (để hoàn thành "TENNIS")',
                hint_vi: 'Tên một môn thể thao dùng vợt. (1 ký tự)',
                rationale_vi: 'Từ cần điền là "TENNIS" (quần vợt).',
                rationale_en: 'The missing letter completes the word "TENNIS".',
            },
            {
                type: 'multimedia',
                question: '33. _ _ _ _ _ _',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/Thi_cac_cap/2019-2020/Tinh_Thanhpho/L6/nghe/De1/1/career.mp3',
                audioContent: 'C-A-R-E-E-R',
                correctAnswer: 'career',
                correctAnswer_vi: 'sự nghiệp',
                hint_vi: 'Audio đánh vần một từ có 6 chữ cái.',
                rationale_vi: 'Audio đánh vần từ "career" (sự nghiệp).',
                rationale_en: 'The audio spells out the word "career".',
            },
            {
                type: 'rearrange',
                question: '34. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['two', 'There are', 'stadiums', 'new', 'in town.'],
                correctAnswer: 'There are two new stadiums in town.',
                correctAnswer_vi: 'Có hai sân vận động mới trong thị trấn.',
                hint_vi: 'Cấu trúc "There are...". Trật tự tính từ: số lượng + tính chất.',
                rationale_vi: 'Thứ tự đúng: There are + số lượng (two) + tính từ (new) + danh từ (stadiums) + nơi chốn.',
                rationale_en: 'Correct order: There are + number + adjective + noun + place.',
            },
            {
                type: 'mc',
                question: '35. The Milers’ goats produce ______ milk.',
                options: [
                    { text: 'A. lot of', isCorrect: false },
                    { text: 'B. many', isCorrect: false },
                    { text: 'C. a few', isCorrect: false },
                    { text: 'D. lots of', isCorrect: true }
                ],
                correctAnswer: 'D. lots of',
                correctAnswer_vi: 'nhiều',
                hint_vi: '"Milk" là danh từ không đếm được. "lots of" hoặc "a lot of".',
                rationale_vi: '"Milk" là danh từ không đếm được, nên không dùng "many" hay "a few". "lot of" thiếu "a". Do đó, "lots of" là đáp án đúng.',
                rationale_en: '"Milk" is an uncountable noun. "lots of" is the correct quantifier.',
            },
            {
                type: 'fill-in-the-blank',
                question: '36. We collect waste food and _ _ _ _ it to pigs.',
                correctAnswer: 'feed',
                correctAnswer_vi: 'cho ăn',
                hint_vi: 'Động từ có nghĩa là "cho ăn". (4 ký tự)',
                rationale_vi: 'Động từ "feed" có nghĩa là cho (động vật) ăn.',
                rationale_en: 'The verb "feed" means to give food to an animal.',
            },
            {
                type: 'fill-in-the-blank',
                question: '37. W_ EK',
                correctAnswer: 'E',
                correctAnswer_vi: 'E (để hoàn thành "WEEK")',
                hint_vi: 'Từ có nghĩa là "tuần". (1 ký tự)',
                rationale_vi: 'Từ cần điền là "WEEK" (tuần).',
                rationale_en: 'The missing letter completes the word "WEEK".',
            },
            {
                type: 'fill-in-the-blank',
                question: '38. Four _ _ _ _ _ _ _ in a year are spring, summer, autumn and winter.',
                correctAnswer: 'seasons',
                correctAnswer_vi: 'mùa',
                hint_vi: 'Xuân, hạ, thu, đông là bốn... (7 ký tự)',
                rationale_vi: 'Xuân, hạ, thu, đông là bốn mùa (four seasons) trong một năm.',
                rationale_en: 'Spring, summer, autumn, and winter are the four seasons.',
            },
            {
                type: 'fill-in-the-blank',
                question: '39. FA_ M',
                correctAnswer: 'R',
                correctAnswer_vi: 'R (để hoàn thành "FARM")',
                hint_vi: 'Từ có nghĩa là "nông trại". (1 ký tự)',
                rationale_vi: 'Từ cần điền là "FARM" (nông trại).',
                rationale_en: 'The missing letter completes the word "FARM".',
            },
            {
                type: 'fill-in-the-blank',
                question: '40. DOZ_ N',
                correctAnswer: 'E',
                correctAnswer_vi: 'E (để hoàn thành "DOZEN")',
                hint_vi: 'Từ có nghĩa là "một tá" (12 cái). (1 ký tự)',
                rationale_vi: 'Từ cần điền là "DOZEN" (một tá).',
                rationale_en: 'The missing letter completes the word "DOZEN".',
            },
            {
                type: 'mc',
                question: '41. ... pink pens on the box?',
                options: [
                    { text: 'A. How many', isCorrect: false },
                    { text: 'B. Are there', isCorrect: true },
                    { text: 'C. Do', isCorrect: false },
                    { text: 'D. How much', isCorrect: false }
                ],
                correctAnswer: 'B. Are there',
                correctAnswer_vi: 'Có...không?',
                hint_vi: 'Cấu trúc câu hỏi Yes/No về sự tồn tại của vật số nhiều.',
                rationale_vi: 'Đây là câu hỏi Yes/No với cấu trúc "There are". Dạng câu hỏi của nó là "Are there...?".',
                rationale_en: 'This is a Yes/No question using the "There are" structure. The interrogative form is "Are there...?".',
            },
            {
                type: 'rearrange',
                question: '42. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['I', 'speak to', 'please?', 'Can', 'Mike,'],
                correctAnswer: 'Can I speak to Mike, please?',
                correctAnswer_vi: 'Làm ơn cho tôi nói chuyện với Mike được không?',
                hint_vi: 'Cấu trúc lịch sự khi gọi điện thoại.',
                rationale_vi: 'Đây là một mẫu câu lịch sự và phổ biến khi muốn nói chuyện với ai đó qua điện thoại.',
                rationale_en: 'This is a common polite phrase used when making a phone call.',
            },
            {
                type: 'rearrange',
                question: '43. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['You can', 'go', 'West Lake.', 'on the', 'boating'],
                correctAnswer: 'You can go boating on the West Lake.',
                correctAnswer_vi: 'Bạn có thể đi chèo thuyền trên Hồ Tây.',
                hint_vi: 'Cấu trúc: go + V-ing (chỉ hoạt động).',
                rationale_vi: 'Cấu trúc "go boating" (đi chèo thuyền) được dùng như một hoạt động. "on the West Lake" là cụm giới từ chỉ nơi chốn.',
                rationale_en: 'The structure "go boating" is used as an activity. "on the West Lake" is a prepositional phrase of place.',
            },
            {
                type: 'fill-in-the-blank',
                question: '44. The weather is much be_ _ _ _ today than yesterday.',
                correctAnswer: 'tter',
                correctAnswer_vi: 'tốt hơn (better)',
                hint_vi: 'Dạng so sánh hơn của "good". (4 ký tự)',
                rationale_vi: 'Từ "than" cho thấy đây là một câu so sánh hơn. Dạng so sánh hơn của "good" là "better".',
                rationale_en: 'The word "than" indicates a comparative sentence. The comparative form of "good" is "better".',
            },
            {
                type: 'fill-in-the-blank',
                question: '45. _ NION',
                correctAnswer: 'O',
                correctAnswer_vi: 'O (để hoàn thành "ONION")',
                hint_vi: 'Tên một loại củ dùng trong nấu ăn. (1 ký tự)',
                rationale_vi: 'Từ cần điền là "ONION" (củ hành).',
                rationale_en: 'The missing letter completes the word "ONION".',
            },
            {
                type: 'fill-in-the-blank',
                question: '46. A: _ _ _ do you travel to work every day? – B: By bus.',
                correctAnswer: 'How',
                correctAnswer_vi: 'Như thế nào',
                hint_vi: 'Câu trả lời là phương tiện ("By bus"), cần từ để hỏi về cách thức. (3 ký tự)',
                rationale_vi: 'Để hỏi về phương tiện đi lại, ta dùng từ hỏi "How".',
                rationale_en: 'To ask about the means of transportation, we use the question word "How".',
            },
            {
                type: 'mc',
                question: '47. Choose the word whose underlined part is pronounced differently from others:',
                options: [
                    { text: 'A. br**ea**d', isCorrect: false },
                    { text: 'B. ah**ea**d', isCorrect: false },
                    { text: 'C. th**ea**ter', isCorrect: true },
                    { text: 'D. spr**ea**d', isCorrect: false }
                ],
                correctAnswer: 'C. theater',
                correctAnswer_vi: 'theater (phát âm /ɪə/)',
                hint_vi: 'So sánh âm /e/ và /ɪə/.',
                rationale_vi: '"ea" trong "theater" được phát âm là /ɪə/, trong khi ở các từ còn lại nó được phát âm là /e/.',
                rationale_en: 'The "ea" in "theater" is pronounced /ɪə/, while in the others it is /e/.',
            },
            {
                type: 'rearrange',
                question: '48. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['favorite', 'is', 'color.', 'Pink', 'my'],
                correctAnswer: 'Pink is my favorite color.',
                correctAnswer_vi: 'Màu hồng là màu yêu thích của tôi.',
                hint_vi: 'Cấu trúc câu khẳng định: S + is + O.',
                rationale_vi: 'Cấu trúc: Chủ ngữ (Pink) + động từ to be (is) + bổ ngữ (my favorite color).',
                rationale_en: 'Structure: Subject + to be verb + complement.',
            },
            {
                type: 'rearrange',
                question: '49. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['yesterday?', 'win', 'your team', 'Did', 'the match'],
                correctAnswer: 'Did your team win the match yesterday?',
                correctAnswer_vi: 'Hôm qua đội của bạn có thắng trận đấu không?',
                hint_vi: 'Câu hỏi Yes/No ở thì quá khứ đơn (Did + S + V?).',
                rationale_vi: 'Cấu trúc câu hỏi Yes/No thì quá khứ đơn: Did + Chủ ngữ (your team) + Động từ nguyên mẫu (win)...?',
                rationale_en: 'Yes/No question structure in the simple past tense.',
            },
            {
                type: 'rearrange',
                question: '50. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['documentaries?', 'Do you', 'watch', 'is boring to', 'think it'],
                correctAnswer: 'Do you think it is boring to watch documentaries?',
                correctAnswer_vi: 'Bạn có nghĩ xem phim tài liệu là nhàm chán không?',
                hint_vi: 'Câu hỏi bắt đầu bằng "Do you think...", theo sau là một mệnh đề.',
                rationale_vi: 'Cấu trúc: Do you think + mệnh đề (it is boring to watch documentaries)?',
                rationale_en: 'Structure: Do you think + clause?',
            },
            {
                type: 'rearrange',
                question: '51. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['Does she like', 'going', 'and enjoying', 'out', 'herself?'],
                correctAnswer: 'Does she like going out and enjoying herself?',
                correctAnswer_vi: 'Cô ấy có thích ra ngoài và tận hưởng không?',
                hint_vi: 'Câu hỏi Yes/No ở thì hiện tại đơn (Does + S + like + V-ing?).',
                rationale_vi: 'Cấu trúc: Does + Chủ ngữ + like + danh động từ 1 + and + danh động từ 2?',
                rationale_en: 'Yes/No question structure with "like" followed by gerunds.',
            },
            {
                type: 'mc',
                question: '52. The question sounds very ... .',
                options: [
                    { text: 'A. easy', isCorrect: true },
                    { text: 'B. easily', isCorrect: false },
                    { text: 'C. ease', isCorrect: false },
                    { text: 'D. at ease', isCorrect: false }
                ],
                correctAnswer: 'A. easy',
                correctAnswer_vi: 'dễ',
                hint_vi: 'Sau động từ liên kết "sounds" là một tính từ.',
                rationale_vi: '"Sounds" là một động từ liên kết (linking verb), theo sau nó phải là một tính từ để mô tả chủ ngữ. "Easy" là tính từ.',
                rationale_en: '"Sounds" is a linking verb and must be followed by an adjective. "Easy" is the adjective.',
            },
            {
                type: 'rearrange',
                question: '53. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['often', 'Lan', 'the housework', 'does', 'after dinner.'],
                correctAnswer: 'Lan often does the housework after dinner.',
                correctAnswer_vi: 'Lan thường làm việc nhà sau bữa tối.',
                hint_vi: 'Trạng từ "often" đứng trước động từ thường "does".',
                rationale_vi: 'Cấu trúc: Chủ ngữ + trạng từ tần suất + động từ + tân ngữ + trạng ngữ thời gian.',
                rationale_en: 'Structure: Subject + adverb of frequency + verb + object + time phrase.',
            },
            {
                type: 'rearrange',
                question: '54. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['Edward loves', 'on', 'with his family.', 'going', 'holiday'],
                correctAnswer: 'Edward loves going on holiday with his family.',
                correctAnswer_vi: 'Edward thích đi nghỉ cùng gia đình.',
                hint_vi: 'Cấu trúc "love + V-ing". Cụm từ "go on holiday".',
                rationale_vi: 'Cấu trúc: Chủ ngữ (Edward) + động từ (loves) + danh động từ (going on holiday) + cụm giới từ (with his family).',
                rationale_en: 'Structure: Subject + verb (loves) + gerund phrase + prepositional phrase.',
            },
            {
                type: 'mc',
                question: '55. Odd one out:',
                options: [
                    { text: 'A. iced', isCorrect: true },
                    { text: 'B. cold', isCorrect: false },
                    { text: 'C. hot', isCorrect: false },
                    { text: 'D. cool', isCorrect: false }
                ],
                correctAnswer: 'A. iced',
                correctAnswer_vi: 'được làm lạnh/có đá',
                hint_vi: 'Ba từ là tính từ chỉ nhiệt độ, một từ chỉ trạng thái "có đá".',
                rationale_vi: '"Cold", "hot", "cool" là các tính từ chỉ nhiệt độ. "Iced" là một quá khứ phân từ dùng như tính từ, chỉ trạng thái (có đá/được ướp lạnh), không phải nhiệt độ tự nhiên.',
                rationale_en: '"Cold", "hot", and "cool" are adjectives of temperature. "Iced" is a participle adjective indicating a state (having ice added).',
            },
            {
                type: 'mc',
                question: '56. Would you like … that for you?',
                options: [
                    { text: 'A. me doing', isCorrect: false },
                    { text: 'B. that I do', isCorrect: false },
                    { text: 'C. me do', isCorrect: false },
                    { text: 'D. me to do', isCorrect: true }
                ],
                correctAnswer: 'D. me to do',
                correctAnswer_vi: 'tôi làm',
                hint_vi: 'Cấu trúc: would like + O + to V.',
                rationale_vi: 'Cấu trúc "would like someone to do something" có nghĩa là "muốn ai đó làm gì đó".',
                rationale_en: 'The structure "would like someone to do something" means "want someone to do something".',
            },
            {
                type: 'multimedia',
                question: '57. What is the _ _ _ _ _ of a box of chocolates?',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2014/3/17/635306499893725994_Audio.mp3',
                audioContent: 'What is the price of a box of chocolates?',
                correctAnswer: 'price',
                correctAnswer_vi: 'giá',
                hint_vi: 'Từ dùng để hỏi về giá tiền. (5 ký tự)',
                rationale_vi: 'Nội dung audio là câu hỏi về giá cả (price).',
                rationale_en: 'The audio asks about the price.',
            },
            {
                type: 'fill-in-the-blank',
                question: '58. A: How _ _ _ _ books are there? – B: There’re 3 books.',
                correctAnswer: 'many',
                correctAnswer_vi: 'bao nhiêu',
                hint_vi: '"Books" là danh từ đếm được, dùng "How many". (4 ký tự)',
                rationale_vi: 'Để hỏi số lượng của danh từ đếm được ("books"), ta dùng "How many".',
                rationale_en: 'To ask about the quantity of a countable noun ("books"), we use "How many".',
            },
            {
                type: 'mc',
                question: '59. Which word has a different stress pattern?',
                options: [
                    { text: 'A. gymnast', isCorrect: false },
                    { text: 'B. orange', isCorrect: false },
                    { text: 'C. temple', isCorrect: false },
                    { text: 'D. arrive', isCorrect: true }
                ],
                correctAnswer: 'D. arrive',
                correctAnswer_vi: 'arrive (trọng âm 2)',
                hint_vi: 'Tìm từ có trọng âm ở âm tiết thứ hai.',
                rationale_vi: '"Arrive" có trọng âm ở âm tiết thứ hai (/əˈraɪv/), trong khi các từ còn lại có trọng âm ở âm tiết thứ nhất.',
                rationale_en: '"Arrive" is stressed on the second syllable, while the others are stressed on the first.',
            },
            {
                type: 'rearrange',
                question: '60. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['ran fast to', 'the grandma.', 'The wolf', 'get there and', 'swallowed up'],
                correctAnswer: 'The wolf ran fast to get there and swallowed up the grandma.',
                correctAnswer_vi: 'Con sói đã chạy nhanh để đến đó và nuốt chửng bà ngoại.',
                hint_vi: 'Câu chuyện Cô bé quàng khăn đỏ. Nối hai hành động bằng "and".',
                rationale_vi: 'Đây là câu tường thuật lại một phần của truyện cổ tích, với hai hành động liên tiếp ở thì quá khứ.',
                rationale_en: 'This sentence narrates part of a fairy tale with two consecutive past actions.',
            },
            {
                type: 'rearrange',
                question: '61. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['be', 'strong.', 'very', 'must', 'A weight lifter'],
                correctAnswer: 'A weight lifter must be very strong.',
                correctAnswer_vi: 'Một vận động viên cử tạ phải rất khỏe.',
                hint_vi: 'Cấu trúc: S + must + be + adj.',
                rationale_vi: 'Cấu trúc câu với động từ khuyết thiếu "must": Chủ ngữ (A weight lifter) + must be + tính từ (very strong).',
                rationale_en: 'Structure with the modal verb "must": Subject + must be + adjective.',
            },
            {
                type: 'fill-in-the-blank',
                question: '62. Would you mind _ _ _ _ _ _ _ on the light?',
                correctAnswer: 'turning',
                correctAnswer_vi: 'bật',
                hint_vi: 'Sau "Would you mind" là một động từ dạng V-ing. (7 ký tự)',
                rationale_vi: 'Cấu trúc "Would you mind + V-ing?" được dùng để đưa ra yêu cầu một cách lịch sự.',
                rationale_en: 'The structure "Would you mind + V-ing?" is used to make a polite request.',
            },
            {
                type: 'fill-in-the-blank',
                question: '63. Let him do it _ _ _ _ _ _ _ .',
                correctAnswer: 'himself',
                correctAnswer_vi: 'tự anh ấy',
                hint_vi: 'Đại từ phản thân cho chủ ngữ "him". (7 ký tự)',
                rationale_vi: 'Đại từ phản thân tương ứng với "him" là "himself", nhấn mạnh hành động được thực hiện bởi chính anh ấy.',
                rationale_en: 'The reflexive pronoun for "him" is "himself".',
            },
            {
                type: 'fill-in-the-blank',
                question: '64. He talks a _ _ _ about his new car.',
                correctAnswer: 'lot',
                correctAnswer_vi: 'nhiều',
                hint_vi: 'Cụm từ "a lot" có nghĩa là "nhiều". (3 ký tự)',
                rationale_vi: 'Cụm từ cố định là "a lot" (rất nhiều).',
                rationale_en: 'The fixed phrase is "a lot".',
            },
            {
                type: 'fill-in-the-blank',
                question: '65. If we use _ _ _ _ paper, we will save a lot of trees.',
                correctAnswer: 'less',
                correctAnswer_vi: 'ít hơn',
                hint_vi: 'Câu điều kiện loại 1: Để cứu cây, chúng ta nên dùng... giấy hơn. (4 ký tự)',
                rationale_vi: 'Để cứu cây (save trees), chúng ta nên dùng ít giấy hơn (use less paper).',
                rationale_en: 'To save trees, we should use less paper.',
            },
            {
                type: 'fill-in-the-blank',
                question: '66. HU_ DRED',
                correctAnswer: 'N',
                correctAnswer_vi: 'N (để hoàn thành "HUNDRED")',
                hint_vi: 'Từ có nghĩa là "trăm". (1 ký tự)',
                rationale_vi: 'Từ cần điền là "HUNDRED" (một trăm).',
                rationale_en: 'The missing letter completes the word "HUNDRED".',
            },
            {
                type: 'fill-in-the-blank',
                question: '67. RIGH_',
                correctAnswer: 'T',
                correctAnswer_vi: 'T (để hoàn thành "RIGHT")',
                hint_vi: 'Từ có nghĩa là "đúng" hoặc "bên phải". (1 ký tự)',
                rationale_vi: 'Từ cần điền là "RIGHT".',
                rationale_en: 'The missing letter completes the word "RIGHT".',
            },
            {
                type: 'mc',
                question: '68. Choose the word whose main stress pattern is not the same as that of the others:',
                options: [
                    { text: 'A. beautiful', isCorrect: false },
                    { text: 'B. interesting', isCorrect: false },
                    { text: 'C. consider', isCorrect: true },
                    { text: 'D. weatherman', isCorrect: false }
                ],
                correctAnswer: 'C. consider',
                correctAnswer_vi: 'consider (trọng âm 2)',
                hint_vi: 'Tìm từ có trọng âm ở âm tiết thứ hai.',
                rationale_vi: '"Consider" có trọng âm ở âm tiết thứ hai (/kənˈsɪdər/), trong khi các từ còn lại có trọng âm ở âm tiết thứ nhất.',
                rationale_en: '"Consider" is stressed on the second syllable, while the others are stressed on the first.',
            },
            {
                type: 'mc',
                question: '69. Please keep ... the grass. You shouldn’t walk on it.',
                options: [
                    { text: 'A. of', isCorrect: false },
                    { text: 'B. off', isCorrect: true },
                    { text: 'C. up', isCorrect: false },
                    { text: 'D. with', isCorrect: false }
                ],
                correctAnswer: 'B. off',
                correctAnswer_vi: 'tránh xa',
                hint_vi: 'Cụm từ có nghĩa là "tránh xa bãi cỏ".',
                rationale_vi: 'Cụm động từ "keep off" có nghĩa là "tránh xa, không đi vào".',
                rationale_en: 'The phrasal verb "keep off" means to stay away from something.',
            },
            {
                type: 'rearrange',
                question: '70. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['This is', 'classmate.', 'our', 'English', 'new'],
                correctAnswer: 'This is our new English classmate.',
                correctAnswer_vi: 'Đây là bạn cùng lớp mới người Anh của chúng tôi.',
                hint_vi: 'Trật tự tính từ trước danh từ: sở hữu -> mới -> quốc tịch.',
                rationale_vi: 'Trật tự các từ bổ nghĩa cho "classmate": our (của chúng tôi) -> new (mới) -> English (người Anh).',
                rationale_en: 'The correct order of determiners and adjectives is possessive -> quality -> origin.',
            },
            {
                type: 'fill-in-the-blank',
                question: '71. BOTT_ E',
                correctAnswer: 'L',
                correctAnswer_vi: 'L (để hoàn thành "BOTTLE")',
                hint_vi: 'Từ có nghĩa là "cái chai". (1 ký tự)',
                rationale_vi: 'Từ cần điền là "BOTTLE" (cái chai).',
                rationale_en: 'The missing letter completes the word "BOTTLE".',
            },
            {
                type: 'fill-in-the-blank',
                question: '72. The meal we have in the evening is called _ _ _ _ _ _ .',
                correctAnswer: 'dinner',
                correctAnswer_vi: 'bữa tối',
                hint_vi: 'Bữa ăn vào buổi tối. (6 ký tự)',
                rationale_vi: 'Bữa ăn vào buổi tối được gọi là "dinner" (bữa tối).',
                rationale_en: 'The meal in the evening is called dinner.',
            },
            {
                type: 'mc',
                question: '73. Choose the word that has the underlined part pronounced differently:',
                options: [
                    { text: 'A. c**a**rrot', isCorrect: false },
                    { text: 'B. s**a**ndwich', isCorrect: false },
                    { text: 'C. gr**a**m', isCorrect: false },
                    { text: 'D. s**au**sage', isCorrect: true }
                ],
                correctAnswer: 'D. sausage',
                correctAnswer_vi: 'sausage (phát âm /ɒ/ hoặc /ɔː/)',
                hint_vi: 'So sánh âm /æ/ và các âm khác.',
                rationale_vi: '"au" trong "sausage" được phát âm là /ɒ/ hoặc /ɔː/, khác với âm /æ/ trong các từ còn lại.',
                rationale_en: 'The "au" in "sausage" is pronounced /ɒ/ or /ɔː/, which is different from the /æ/ sound in the others.',
            },
            {
                type: 'fill-in-the-blank',
                question: '74. My sister doesn\'t like volleyball at all. She _ _ _ _ _ plays it.',
                correctAnswer: 'never',
                correctAnswer_vi: 'không bao giờ',
                hint_vi: 'Trạng từ chỉ tần suất "không bao giờ". (5 ký tự)',
                rationale_vi: 'Nếu cô ấy không thích một thứ gì đó "at all" (chút nào), có nghĩa là cô ấy "never" (không bao giờ) làm nó.',
                rationale_en: 'If she doesn\'t like it "at all", it means she "never" plays it.',
            },
            {
                type: 'rearrange',
                question: '75. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['will win', 'football team', 'this season.', 'all the matches', 'My favorite'],
                correctAnswer: 'My favorite football team will win all the matches this season.',
                correctAnswer_vi: 'Đội bóng yêu thích của tôi sẽ thắng tất cả các trận đấu trong mùa này.',
                hint_vi: 'Cấu trúc thì tương lai đơn: S + will + V + O.',
                rationale_vi: 'Cấu trúc: Chủ ngữ (My favorite football team) + will win + tân ngữ (all the matches) + trạng ngữ thời gian.',
                rationale_en: 'Future simple tense structure: Subject + will + verb + object + time phrase.',
            },
            {
                type: 'rearrange',
                question: '76. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['are', 'my pillow.', 'little cats', 'playing with', 'Some'],
                correctAnswer: 'Some little cats are playing with my pillow.',
                correctAnswer_vi: 'Vài chú mèo con đang chơi với cái gối của tôi.',
                hint_vi: 'Thì hiện tại tiếp diễn: S + are + V-ing.',
                rationale_vi: 'Cấu trúc: Chủ ngữ (Some little cats) + are playing with + tân ngữ (my pillow).',
                rationale_en: 'Present continuous tense structure: Subject + are + V-ing + object.',
            },
            {
                type: 'mc',
                question: '77. Mr. Minh ... English from 7:30 am to 9:00 pm every day.',
                options: [
                    { text: 'A. teach', isCorrect: false },
                    { text: 'B. teaches', isCorrect: true },
                    { text: 'C. is teaching', isCorrect: false },
                    { text: 'D. taught', isCorrect: false }
                ],
                correctAnswer: 'B. teaches',
                correctAnswer_vi: 'dạy',
                hint_vi: '"every day" chỉ thói quen, dùng thì hiện tại đơn. Chủ ngữ số ít.',
                rationale_vi: '"every day" là dấu hiệu của thì hiện tại đơn. Chủ ngữ ngôi thứ ba số ít ("Mr. Minh") nên động từ "teach" phải thêm "es".',
                rationale_en: '"every day" indicates the simple present tense. The third-person singular subject requires "teaches".',
            },
            {
                type: 'rearrange',
                question: '78. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['your opinion?', 'anyone', 'ever asked', 'Has', 'you for'],
                correctAnswer: 'Has anyone ever asked you for your opinion?',
                correctAnswer_vi: 'Đã có ai từng hỏi ý kiến của bạn chưa?',
                hint_vi: 'Câu hỏi Yes/No ở thì hiện tại hoàn thành (Has + S + V3?).',
                rationale_vi: 'Cấu trúc câu hỏi thì hiện tại hoàn thành: Has + chủ ngữ (anyone) + ever + V3 (asked) + tân ngữ?',
                rationale_en: 'Present perfect Yes/No question structure.',
            },
            {
                type: 'multimedia',
                question: '79. ’’Pokemon’’ is a famous Japanese _ _ _ _ _ _ _ in the world.',
                mediaType: 'image',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2019/2/21/636863176462855944_566X320.jpg',
                correctAnswer: 'cartoon',
                correctAnswer_vi: 'phim hoạt hình',
                hint_vi: 'Pokemon là một bộ phim... (7 ký tự)',
                rationale_vi: 'Hình ảnh và kiến thức chung cho thấy Pokemon là một bộ phim hoạt hình (cartoon) nổi tiếng.',
                rationale_en: 'The image and general knowledge identify Pokemon as a famous cartoon.',
            },
            {
                type: 'fill-in-the-blank',
                question: '80. She often _ _ _ breakfast with her family.',
                correctAnswer: 'has',
                correctAnswer_vi: 'ăn/có',
                hint_vi: 'Động từ "have" chia ở ngôi thứ ba số ít. (3 ký tự)',
                rationale_vi: 'Chủ ngữ ngôi thứ ba số ít ("She") đi với "has" trong thì hiện tại đơn.',
                rationale_en: 'The third-person singular subject "She" takes "has" in the simple present tense.',
            },
            {
                type: 'mc',
                question: '81. Choose the word whose underlined part is pronounced differently from others:',
                options: [
                    { text: 'A. need**ed**', isCorrect: false },
                    { text: 'B. crash**ed**', isCorrect: true },
                    { text: 'C. pollut**ed**', isCorrect: false },
                    { text: 'D. regard**ed**', isCorrect: false }
                ],
                correctAnswer: 'B. crashed',
                correctAnswer_vi: 'crashed (phát âm /t/)',
                hint_vi: 'Tìm từ có đuôi "-ed" không được phát âm là /ɪd/.',
                rationale_vi: 'Đuôi "-ed" được phát âm là /t/ sau các âm vô thanh như /ʃ/ (trong "crash"). Trong khi đó, nó được phát âm là /ɪd/ sau các âm /t/ và /d/ (trong "need", "pollute", "regard").',
                rationale_en: 'The "-ed" ending is pronounced /t/ after unvoiced sounds like /ʃ/ (crash). It is pronounced /ɪd/ after /t/ and /d/ sounds.',
            },
            {
                type: 'rearrange',
                question: '82. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['a teacher.', 'to', 'is', 'Her dream', 'become'],
                correctAnswer: 'Her dream is to become a teacher.',
                correctAnswer_vi: 'Ước mơ của cô ấy là trở thành một giáo viên.',
                hint_vi: 'Cấu trúc: S + is + to V.',
                rationale_vi: 'Cấu trúc: Chủ ngữ (Her dream) + động từ to be (is) + động từ nguyên mẫu có to (to become a teacher) đóng vai trò bổ ngữ.',
                rationale_en: 'Structure: Subject + to be verb + to-infinitive as a complement.',
            },
            {
                type: 'rearrange',
                question: '83. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['How many', 'they like?', 'soap would', 'bars of'],
                correctAnswer: 'How many bars of soap would they like?',
                correctAnswer_vi: 'Họ muốn bao nhiêu bánh xà phòng?',
                hint_vi: 'Cấu trúc hỏi số lượng: How many + Ns + would + S + like?',
                rationale_vi: 'Cấu trúc hỏi số lượng với "would like": How many + bars of soap + would they like?',
                rationale_en: 'Question structure for quantity with "would like".',
            },
            {
                type: 'multimedia',
                question: '84. Where did you spend your _ _ _ _ _ _ ?',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/20/635205607815204851_Audio.mp3',
                audioContent: 'Where did you spend your holiday?',
                correctAnswer: 'holiday',
                correctAnswer_vi: 'kỳ nghỉ',
                hint_vi: 'Từ có nghĩa là "kỳ nghỉ". (7 ký tự)',
                rationale_vi: 'Nội dung audio là câu hỏi "Where did you spend your holiday?" (Bạn đã trải qua kỳ nghỉ của mình ở đâu?).',
                rationale_en: 'The audio asks "Where did you spend your holiday?".',
            },
            {
                type: 'fill-in-the-blank',
                question: '85. _ _ _ does Mrs White travel to work? – By bus.',
                correctAnswer: 'How',
                correctAnswer_vi: 'Như thế nào',
                hint_vi: 'Câu trả lời là phương tiện, cần từ để hỏi về cách thức. (3 ký tự)',
                rationale_vi: 'Để hỏi về phương tiện đi lại ("By bus"), ta dùng từ hỏi "How".',
                rationale_en: 'To ask about the means of transportation ("By bus"), we use the question word "How".',
            },
            {
                type: 'multimedia',
                question: '86. She reads in the _ _ _ _ _ _ _ from 7 o’clock to 9.30.',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2014/3/14/635303884671371725_Audio.mp3',
                audioContent: 'She reads in the library...',
                correctAnswer: 'library',
                correctAnswer_vi: 'thư viện',
                hint_vi: 'Nơi người ta thường đến để đọc sách. (7 ký tự)',
                rationale_vi: 'Nội dung audio cho biết cô ấy đọc sách ở thư viện (library).',
                rationale_en: 'The audio states that she reads in the library.',
            },
            {
                type: 'mc',
                question: '87. ’’Reduce’’ means using something … .',
                options: [
                    { text: 'A. again', isCorrect: false },
                    { text: 'B. new', isCorrect: false },
                    { text: 'C. less', isCorrect: true },
                    { text: 'D. old', isCorrect: false }
                ],
                correctAnswer: 'C. less',
                correctAnswer_vi: 'ít hơn',
                hint_vi: '"Reduce" là một trong 3R (Reduce, Reuse, Recycle).',
                rationale_vi: 'Từ "Reduce" trong khẩu hiệu 3R có nghĩa là giảm thiểu, tức là sử dụng ít hơn (using something less).',
                rationale_en: 'The word "Reduce" means to use something less.',
            },
            {
                type: 'rearrange',
                question: '88. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['in', 'music', 'his free time.', 'listens to', 'Kyle often'],
                correctAnswer: 'Kyle often listens to music in his free time.',
                correctAnswer_vi: 'Kyle thường nghe nhạc vào thời gian rảnh.',
                hint_vi: 'Trạng từ "often" đứng trước động từ thường.',
                rationale_vi: 'Cấu trúc: Chủ ngữ + trạng từ tần suất + động từ + tân ngữ + cụm từ chỉ thời gian.',
                rationale_en: 'Structure: Subject + adverb of frequency + verb + object + time phrase.',
            },
            {
                type: 'rearrange',
                question: '89. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['require', 'two separate', 'Team', 'teams.', 'sports'],
                correctAnswer: 'Team sports require two separate teams.',
                correctAnswer_vi: 'Các môn thể thao đồng đội yêu cầu hai đội riêng biệt.',
                hint_vi: 'Bắt đầu bằng cụm chủ ngữ "Team sports".',
                rationale_vi: 'Thứ tự đúng: Chủ ngữ (Team sports) + động từ (require) + tân ngữ (two separate teams).',
                rationale_en: 'The correct order is Subject + Verb + Object.',
            },
            {
                type: 'fill-in-the-blank',
                question: '90. What is the weather _ _ _ _ in winter?',
                correctAnswer: 'like',
                correctAnswer_vi: 'như thế nào',
                hint_vi: 'Cấu trúc hỏi thời tiết: What is the weather like? (4 ký tự)',
                rationale_vi: 'Cấu trúc hỏi về đặc điểm thời tiết là "What is the weather like?".',
                rationale_en: 'The structure to ask about the characteristics of the weather is "What is the weather like?".',
            },
            {
                type: 'fill-in-the-blank',
                question: '91. _ _ _ _ _ _ _ means creating new products from used materials.',
                correctAnswer: 'Recycle',
                correctAnswer_vi: 'Tái chế',
                hint_vi: 'Từ có nghĩa là "tái chế". (7 ký tự)',
                rationale_vi: '"Recycle" (tái chế) là quá trình tạo ra sản phẩm mới từ vật liệu đã qua sử dụng.',
                rationale_en: '"Recycle" means creating new products from used materials.',
            },
            {
                type: 'rearrange',
                question: '92. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['plays', 'badminton', 'in the morning.', 'sometimes', 'He'],
                correctAnswer: 'He sometimes plays badminton in the morning.',
                correctAnswer_vi: 'Anh ấy thỉnh thoảng chơi cầu lông vào buổi sáng.',
                hint_vi: 'Trạng từ tần suất "sometimes" có thể đứng trước động từ thường.',
                rationale_vi: 'Cấu trúc: Chủ ngữ + trạng từ tần suất + động từ + tân ngữ + trạng ngữ thời gian.',
                rationale_en: 'Structure: Subject + adverb of frequency + verb + object + time phrase.',
            },
            {
                type: 'rearrange',
                question: '93. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['My father', 'Tet.', 'repaint our', 'house before', 'and I will'],
                correctAnswer: 'My father and I will repaint our house before Tet.',
                correctAnswer_vi: 'Bố tôi và tôi sẽ sơn lại nhà trước Tết.',
                hint_vi: 'Thì tương lai đơn: S + will + V.',
                rationale_vi: 'Chủ ngữ là "My father and I". Cấu trúc thì tương lai đơn: S + will + V + O.',
                rationale_en: 'Future simple tense structure: Subject + will + Verb + Object.',
            },
            {
                type: 'rearrange',
                question: '94. Sắp xếp các từ/cụm từ sau thành câu đúng:',
                words: ['friendly', '‘Good morning’', 'He said', 'way.', 'in a most'],
                correctAnswer: 'He said ‘Good morning’ in a most friendly way.',
                correctAnswer_vi: 'Anh ấy nói "Chào buổi sáng" một cách thân thiện nhất.',
                hint_vi: 'Cấu trúc: S + said + "..." + in a ... way.',
                rationale_vi: 'Thứ tự đúng: Chủ ngữ (He) + động từ (said) + lời nói trực tiếp (‘Good morning’) + cụm trạng từ chỉ cách thức (in a most friendly way).',
                rationale_en: 'The correct order is Subject + verb + direct speech + adverbial phrase of manner.',
            },
            {
                type: 'fill-in-the-blank',
                question: '95. Oxford University is the _ _ _ _ _ _ university in Great Britain. It was built in the 12th century.',
                correctAnswer: 'oldest',
                correctAnswer_vi: 'cổ nhất',
                hint_vi: 'Dạng so sánh nhất của "old". (6 ký tự)',
                rationale_vi: 'Vì đây là trường đại học được so sánh với tất cả các trường khác ở Anh ("the...university in Great Britain"), ta dùng so sánh nhất "oldest".',
                rationale_en: 'As it is compared to all others in its group, the superlative form "oldest" is required.',
            },
            {
                type: 'fill-in-the-blank',
                question: '96. Is this bed suitable _ _ _ your bedroom?',
                correctAnswer: 'for',
                correctAnswer_vi: 'cho',
                hint_vi: 'Cấu trúc "suitable for" (phù hợp cho). (3 ký tự)',
                rationale_vi: 'Tính từ "suitable" đi với giới từ "for".',
                rationale_en: 'The adjective "suitable" is followed by the preposition "for".',
            },
            {
                type: 'fill-in-the-blank',
                question: '97. Would you _ _ _ _ to see a movie?',
                correctAnswer: 'like',
                correctAnswer_vi: 'muốn',
                hint_vi: 'Cấu trúc mời lịch sự "Would you like to...?". (4 ký tự)',
                rationale_vi: 'Cụm từ cố định dùng để mời là "Would you like to...?".',
                rationale_en: 'The fixed phrase for invitations is "Would you like to...?".',
            },
            {
                type: 'mc',
                question: '98. We don’t have much time now. We ... you later.',
                options: [
                    { text: 'A. see', isCorrect: false },
                    { text: 'B. sees', isCorrect: false },
                    { text: 'C. will see', isCorrect: true },
                    { text: 'D. will sees', isCorrect: false }
                ],
                correctAnswer: 'C. will see',
                correctAnswer_vi: 'sẽ gặp',
                hint_vi: 'Một quyết định tức thời tại thời điểm nói, dùng thì tương lai đơn.',
                rationale_vi: 'Đây là một quyết định được đưa ra tại thời điểm nói ("now"), nên ta dùng thì tương lai đơn (will + V).',
                rationale_en: 'This is a spontaneous decision made at the moment of speaking, so the simple future tense (will + V) is used.',
            },
            {
                type: 'multimedia',
                question: '99. Listen and tick:',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/21/635206396889394786_Audio.mp3',
                audioContent: 'Whose birthday party was it?',
                options: [
                    { text: 'A. Whose birthday party was it?', isCorrect: true },
                    { text: 'B. Whose birthday had party?', isCorrect: false },
                    { text: 'C. Who had a birthday party?', isCorrect: false },
                    { text: 'D. Who was in this birthday party?', isCorrect: false }
                ],
                correctAnswer: 'A. Whose birthday party was it?',
                correctAnswer_vi: 'Đó là tiệc sinh nhật của ai?',
                hint_vi: 'Lắng nghe kỹ cấu trúc câu hỏi.',
                rationale_vi: 'Nội dung audio là câu hỏi "Whose birthday party was it?".',
                rationale_en: 'The audio content is the question "Whose birthday party was it?".',
            },
            {
                type: 'mc',
                question: '100. Choose the word whose main stress pattern is not the same as that of the others:',
                options: [
                    { text: 'A. become', isCorrect: false },
                    { text: 'B. police', isCorrect: false },
                    { text: 'C. classmate', isCorrect: true },
                    { text: 'D. repeat', isCorrect: false }
                ],
                correctAnswer: 'C. classmate',
                correctAnswer_vi: 'classmate (trọng âm 1)',
                hint_vi: 'Tìm từ có trọng âm ở âm tiết thứ nhất.',
                rationale_vi: '"Classmate" có trọng âm ở âm tiết thứ nhất (/ˈklɑːsmeɪt/), trong khi các từ còn lại có trọng âm ở âm tiết thứ hai.',
                rationale_en: '"Classmate" is stressed on the first syllable, while the others are stressed on the second.',
            }
        ];

        // --- Component: ProgressBar.tsx ---
        const ProgressBar = ({ percentage }) => {
            return (
                <div className="w-full h-2 bg-blue-100 rounded-full mt-4 overflow-hidden">
                    <div
                        className="h-full bg-blue-500 transition-all duration-500 ease-in-out"
                        style={{ width: `${percentage}%` }}
                    ></div>
                </div>
            );
        };
        
        // --- Component: MessageBox.tsx ---
        const MessageBox = ({ message, type }) => {
            const [visible, setVisible] = React.useState(false);

            React.useEffect(() => {
                if (message) {
                    setVisible(true);
                    const timer = setTimeout(() => {
                        setVisible(false);
                    }, 2700);
                    return () => clearTimeout(timer);
                } else {
                    setVisible(false);
                }
            }, [message, type]);

            const baseClasses = "fixed top-4 left-1/2 -translate-x-1/2 p-4 rounded-xl shadow-xl text-center font-bold text-lg z-50 transition-all duration-300 transform";
            
            const typeClasses = {
                success: 'bg-green-100 border border-green-500 text-green-800',
                error: 'bg-red-100 border border-red-500 text-red-800',
                info: 'bg-yellow-100 border border-yellow-500 text-yellow-800',
            };

            const visibilityClasses = visible ? 'opacity-100 scale-100' : 'opacity-0 scale-90 pointer-events-none';

            return (
                <div className={`${baseClasses} ${typeClasses[type]} ${visibilityClasses}`}>
                    {message}
                </div>
            );
        };
        
        // --- Component: RationaleBox.tsx ---
        const RationaleBox = ({ question, isCorrect, submittedAnswer }) => {
            const boxClasses = `mt-6 p-4 rounded-xl border transition duration-300 fade-in border-l-4 ${
                isCorrect ? 'bg-green-100 border-green-600' : 'bg-red-100 border-red-600'
            }`;
            
            const submittedAnswerDisplay = () => {
                const isFillIn = question.type === 'fill-in-the-blank' || (question.type === 'multimedia' && !question.options);
                
                if(isCorrect && !isFillIn) return null;
                
                return (
                    <>
                        <strong className="text-gray-700">
                           {'Bạn đã chọn/Điền: '}
                        </strong>
                        <span className="text-red-700 font-medium break-words">{submittedAnswer}</span>
                        <br/>
                    </>
                );
            }

            return (
                <div className={boxClasses}>
                    <p className="font-bold text-lg mb-2 text-blue-700">Giải thích:</p>
                    <div className="text-gray-700 space-y-1">
                        {!isCorrect && submittedAnswerDisplay()}
                        <p><strong>Đáp án đúng:</strong> <span className="text-green-800 font-semibold">{question.correctAnswer}</span></p>
                        
                        {question.correctAnswer_vi && (
                             <p><strong>Dịch nghĩa:</strong> <span className="text-green-600 font-medium">{question.correctAnswer_vi}</span></p>
                        )}
                        <p className="pt-1">{question.rationale_vi || 'Không có giải thích chi tiết.'}</p>
                    </div>
                </div>
            );
        };

        // --- Component: MediaDisplay.tsx (Helper for Image/Audio rendering) ---
        const MediaDisplay = ({ question, showMessage }) => {
            const mediaContainerClasses = "w-full p-4 bg-gray-100 rounded-xl mb-4 text-center border-2 border-dashed border-gray-300";

            if (question.mediaType === 'image') {
                return (
                    <div className={mediaContainerClasses}>
                        <p className="text-blue-600 font-bold mb-2">🖼️ Phân tích hình ảnh:</p>
                        <img 
                            src={question.mediaSource}
                            alt={question.imagePrompt || 'Hình ảnh cho câu hỏi'} 
                            className="w-full max-w-xs mx-auto rounded-lg shadow-md border-2 border-gray-300"
                            crossOrigin="anonymous"
                            referrerPolicy="no-referrer"
                            onError={(e) => { 
                                e.target.onerror = null; 
                                e.target.src = `https://placehold.co/566x320/FF0000/FFFFFF?text=L%E1%BB%97I+T%E1%BA%A2I+%E1%BA%A2NH`; 
                                showMessage('Lỗi tải ảnh: File media có thể đã bị chặn.', 'error');
                            }}
                        />
                    </div>
                );
            }

            if (question.mediaType === 'audio') {
                return (
                    <div className={mediaContainerClasses}>
                        <p className="text-blue-600 font-bold mb-2">🔊 Lắng nghe audio:</p>
                        <audio 
                            controls
                            src={question.mediaSource}
                            className="w-full max-w-sm mx-auto my-2"
                            crossOrigin="anonymous"
                            referrerPolicy="no-referrer"
                            onError={() => {
                                showMessage('Lỗi tải Audio: File media có thể đã bị chặn.', 'error');
                            }}
                        >
                            Your browser does not support the audio element.
                        </audio>
                    </div>
                );
            }
            return null;
        }

        // --- Component: FillInTheBlankQuestion.tsx ---
        const FillInTheBlankQuestion = ({ question, isAnswered, onSubmit, showMessage, questionIndex }) => {
            const [inputValue, setInputValue] = React.useState('');

            React.useEffect(() => {
                setInputValue('');
            }, [question]);

            const handleSubmitClick = () => {
                const trimmedInput = inputValue.trim();
                if (trimmedInput === '') {
                    showMessage('Vui lòng điền câu trả lời của bạn!', 'info');
                    return;
                }
                const isCorrect = trimmedInput.toLowerCase() === question.correctAnswer.toLowerCase();
                onSubmit(trimmedInput, isCorrect);
            };
            
            const questionTextParts = React.useMemo(() => {
                const text = question.question.replace(/^\d+\.\s*/, '');
                const underscoreMarker = /_{2,}/; // Match two or more underscores
                if (underscoreMarker.test(text)) {
                    const parts = text.split(underscoreMarker);
                    return [parts[0], parts.slice(1).join('__')];
                }
                return [text, '']; 
            }, [question.question]);

            let inputClasses = 'inline-block mx-2 p-2 border-2 rounded-lg text-lg text-center shadow-sm transition duration-200 align-baseline w-48 font-mono';
            if (isAnswered) {
                const isSubmissionCorrect = inputValue.trim().toLowerCase() === question.correctAnswer.toLowerCase();
                inputClasses += isSubmissionCorrect ? ' border-green-500 bg-green-50 font-bold' : ' border-red-500 bg-red-50 font-bold';
            } else {
                inputClasses += ' border-gray-300 focus:border-blue-500';
            }

            const placeholderLength = question.correctAnswer.length > 0 ? question.correctAnswer.length : 4;
            const inputWidthStyle = {
                width: `${Math.max(8, placeholderLength * 1.5)}rem`, 
                maxWidth: '100%',
            };

            return (
                <div className="space-y-4">
                    {question.mediaType && <MediaDisplay question={question} showMessage={showMessage} />}
                    <div className="text-xl sm:text-2xl font-semibold mb-6 leading-relaxed text-center flex justify-center items-center flex-wrap">
                        <span>{questionIndex}. </span>
                        {questionTextParts[0] && <span className="ml-1">{questionTextParts[0]}</span>}
                        <input
                            type="text"
                            value={inputValue}
                            onChange={(e) => setInputValue(e.target.value)}
                            disabled={isAnswered}
                            placeholder={"Điền từ"}
                            className={inputClasses}
                            style={inputWidthStyle}
                            onKeyPress={(e) => e.key === 'Enter' && !isAnswered && handleSubmitClick()}
                            aria-label="Fill in the blank"
                        />
                        {questionTextParts[1] && <span>{questionTextParts[1]}</span>}
                    </div>
                    <button
                        onClick={handleSubmitClick}
                        disabled={isAnswered}
                        className="w-full py-2 px-4 bg-green-600 text-white font-semibold rounded-lg shadow-md transition duration-300 hover:bg-green-700 mt-4 disabled:bg-gray-400 disabled:cursor-not-allowed active:scale-98"
                    >
                        Kiểm Tra
                    </button>
                </div>
            );
        };
        
        // --- Component: MultipleChoiceQuestion.tsx ---
        const MultipleChoiceQuestion = ({ question, isAnswered, onSubmit, showMessage, questionIndex }) => {
            const [selectedIndex, setSelectedIndex] = React.useState(null);

            React.useEffect(() => {
                setSelectedIndex(null);
            }, [question]);

            const handleSubmitClick = () => {
                if (selectedIndex === null) {
                    showMessage('Vui lòng chọn một đáp án!', 'info');
                    return;
                }
                const selectedOption = question.options[selectedIndex];
                onSubmit(selectedOption.text, selectedOption.isCorrect);
            };

            return (
                <>
                    {question.mediaType && <MediaDisplay question={question} showMessage={showMessage} />}
                    <h3
                        className="text-xl sm:text-2xl font-semibold mb-6 leading-relaxed"
                        dangerouslySetInnerHTML={{ __html: `${questionIndex}. ${question.question.replace(/^\d+\.\s*/, '')}` }}
                    />
                    <div className="space-y-4">
                        <div className="space-y-3">
                            {question.options.map((option, index) => {
                                const isSelected = selectedIndex === index;
                                let labelClasses = "block p-4 border-2 rounded-xl shadow-md text-lg transition duration-200";

                                if (isAnswered) {
                                    labelClasses += " cursor-default";
                                    if (option.isCorrect) {
                                        labelClasses += " bg-green-100 border-green-500 font-bold";
                                    } else if (isSelected) {
                                        labelClasses += " bg-red-100 border-red-500 font-bold";
                                    } else {
                                        labelClasses += " border-gray-200 opacity-60";
                                    }
                                } else {
                                    labelClasses += " cursor-pointer hover:bg-blue-50 hover:border-blue-300";
                                    if(isSelected) {
                                        labelClasses += " bg-blue-100 border-blue-500";
                                    } else {
                                        labelClasses += " border-gray-200";
                                    }
                                }

                                return (
                                    <div key={index} className="relative">
                                        <input
                                            type="radio"
                                            id={`option-${questionIndex}-${index}`}
                                            name={`mc-option-${questionIndex}`}
                                            value={index}
                                            className="hidden"
                                            checked={isSelected}
                                            onChange={() => setSelectedIndex(index)}
                                            disabled={isAnswered}
                                        />
                                        <label htmlFor={`option-${questionIndex}-${index}`} className={labelClasses}>
                                            {option.text}
                                        </label>
                                    </div>
                                );
                            })}
                        </div>
                        <button
                            onClick={handleSubmitClick}
                            disabled={isAnswered}
                            className="w-full py-2 px-4 bg-green-600 text-white font-semibold rounded-lg shadow-md transition duration-300 hover:bg-green-700 mt-4 disabled:bg-gray-400 disabled:cursor-not-allowed active:scale-98"
                        >
                            Kiểm Tra
                        </button>
                    </div>
                </>
            );
        };
        
        // --- Component: RearrangeQuestion.tsx ---
        const WordBlock = ({ word, onClick, isSource, isAnswered }) => {
            const baseClasses = 'word-block px-3 py-2 text-base sm:text-lg font-semibold rounded-lg shadow-sm transition-all duration-150 break-words transform active:scale-95';
            const sourceClasses = isSource ? 'bg-blue-100 text-blue-800 hover:bg-blue-200' : 'bg-gray-100 text-gray-800 border-b-2 border-gray-300';
            const disabledClasses = 'opacity-60 cursor-default shadow-inner';
            const interactiveClasses = 'cursor-pointer';

            return (
                <span
                    onClick={!isAnswered ? onClick : undefined}
                    className={`${baseClasses} ${sourceClasses} ${isAnswered ? disabledClasses : interactiveClasses}`}
                >
                    {word.text}
                </span>
            );
        };

        const RearrangeQuestion = ({ question, isAnswered, onSubmit, showMessage, questionIndex, isCorrect }) => {
            const [sentenceWords, setSentenceWords] = React.useState([]);
            
            const initialSourceWords = React.useMemo(() => {
                return [...question.words]
                    .map((text) => ({ id: crypto.randomUUID(), text })) 
                    .sort(() => Math.random() - 0.5);
            }, [question]);

            const [sourceWords, setSourceWords] = React.useState(initialSourceWords);

            React.useEffect(() => {
                setSourceWords(initialSourceWords);
                setSentenceWords([]);
            }, [initialSourceWords]);

            const handleSelectWord = (word) => {
                setSourceWords(prev => prev.filter(w => w.id !== word.id));
                setSentenceWords(prev => [...prev, word]);
            };

            const handleReturnWord = (word) => {
                setSentenceWords(prev => prev.filter(w => w.id !== word.id));
                setSourceWords(prev => [...prev, word].sort((a, b) => initialSourceWords.findIndex(sw => sw.text === a.text) - initialSourceWords.findIndex(sw => sw.text === b.text)));
            };

            const handleSubmitClick = () => {
                if (sentenceWords.length === 0) {
                    showMessage('Vui lòng sắp xếp các từ!', 'info');
                    return;
                }
                
                const submitted = sentenceWords.map(w => w.text).join(' ').replace(/\s+([.,?!])/g, '$1').trim();
                const normalize = (str) => str.replace(/[.,?!'’]/g, '').replace(/\s+/g, ' ').toLowerCase().trim();
                
                const isCorrectResult = normalize(submitted) === normalize(question.correctAnswer);
                onSubmit(submitted, isCorrectResult);
            };

            return (
                <>
                    <h3 className="text-xl sm:text-2xl font-semibold mb-6 leading-relaxed">
                       {`${questionIndex}. ${question.question.replace(/^\d+\.\s*/, '')}`}
                    </h3>
                    <div className="space-y-4">
                        <div className={`min-h-[60px] p-3 border-2 rounded-xl shadow-inner flex flex-wrap gap-2 items-center transition duration-300 ${isAnswered ? (isCorrect ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50') : 'border-blue-300 bg-blue-50 border-dashed'}`}>
                            {sentenceWords.length === 0 && !isAnswered ? (
                                <span className="text-gray-500 italic text-sm">Chạm vào các từ bên dưới để xây dựng câu...</span>
                            ) : (
                                sentenceWords.map(word => (
                                    <WordBlock key={word.id} word={word} onClick={() => handleReturnWord(word)} isSource={false} isAnswered={isAnswered} />
                                ))
                            )}
                        </div>
                        
                        <div className="min-h-[100px] p-4 bg-gray-100 rounded-xl shadow-md flex flex-wrap gap-2 items-center border border-gray-200">
                            {sourceWords.map(word => (
                                <WordBlock key={word.id} word={word} onClick={() => handleSelectWord(word)} isSource={true} isAnswered={isAnswered} />
                            ))}
                        </div>
                        <button
                            onClick={handleSubmitClick}
                            disabled={isAnswered}
                            className="w-full py-2 px-4 bg-green-600 text-white font-semibold rounded-lg shadow-md transition duration-300 hover:bg-green-700 mt-4 disabled:bg-gray-400 disabled:cursor-not-allowed active:scale-98"
                        >
                            Kiểm Tra
                        </button>
                    </div>
                </>
            );
        };
        
        // --- Component: StartScreen.tsx ---
        const StartScreen = ({ onStart }) => {
            const [name, setName] = React.useState('');
            const isButtonDisabled = name.trim() === '';

            const handleStart = () => {
                if (!isButtonDisabled) onStart(name.trim());
            };

            return (
                <div className="fade-in text-center p-4">
                    <header className="mb-8">
                        <h1 className="text-3xl sm:text-4xl font-extrabold text-blue-600 mb-2">BỘ ĐỀ ÔN IOE K6 SỐ: 01.1</h1>
                        <p className="text-lg text-gray-500">Bộ đề ôn luyện IOE Khối 6 ({questions.length} câu)</p>
                    </header>
                    <div className="max-w-md mx-auto bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                        <h2 className="text-2xl font-semibold mb-4 text-gray-700">Sẵn sàng thử sức!</h2>
                        <p className="text-gray-600 mb-6">Mỗi câu trả lời đúng lần đầu được cộng 10 điểm.</p>
                        <div className="space-y-4">
                            <input
                                type="text"
                                placeholder="Nhập tên của bạn"
                                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-lg shadow-sm transition duration-150"
                                maxLength={50}
                                value={name}
                                onChange={(e) => setName(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && handleStart()}
                            />
                            <button
                                onClick={handleStart}
                                disabled={isButtonDisabled}
                                className="w-full py-3 px-4 bg-blue-500 text-white font-bold rounded-xl shadow-lg transition duration-300 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-xl active:scale-98"
                            >
                                Bắt Đầu
                            </button>
                        </div>
                    </div>
                </div>
            );
        };
        
        // --- Component: EndScreen.tsx ---
        const EndScreen = ({ playerName, score, onRestart, onReview, incorrectAnswers }) => {
            const maxScore = questions.length * 10;
            const percentage = maxScore > 0 ? (score / maxScore) * 100 : 0;
            
            const getFeedbackMessage = () => {
                if (percentage === 100) return "🎉 Tuyệt vời! Bạn đã trả lời đúng tất cả!";
                if (percentage >= 80) return "👏 Rất tốt! Gần như hoàn hảo!";
                if (percentage >= 50) return "👍 Tốt lắm! Hãy tiếp tục cố gắng.";
                return "📖 Đừng nản lòng! Hãy xem lại các câu sai để tiến bộ nhé.";
            };

            return (
                <div className="text-center fade-in p-4">
                    <h2 className="text-3xl font-bold mb-4 text-green-600">Hoàn Thành Bài Thi!</h2>
                    <p className="text-xl text-gray-700 mb-6">
                        Chúc mừng, <span className="font-extrabold text-blue-600">{playerName}</span>!
                    </p>
                    <div className="bg-white p-8 rounded-xl shadow-lg inline-block border border-gray-100">
                        <p className="text-2xl font-semibold mb-2 text-gray-700">Điểm số cuối cùng:</p>
                        <p className={`text-6xl font-black mb-4 ${percentage >= 80 ? 'text-green-600' : 'text-red-600'}`}>
                            {score} / {maxScore}
                        </p>
                        <p className="text-lg font-medium text-gray-600">{getFeedbackMessage()}</p>
                    </div>
                    <div className="mt-8 flex justify-center gap-4">
                         {incorrectAnswers.length > 0 && (
                            <button
                                onClick={onReview}
                                className="py-3 px-6 bg-yellow-500 text-white font-bold rounded-xl shadow-lg transition duration-300 hover:bg-yellow-600 text-lg active:scale-98"
                            >
                                Xem lại câu sai
                            </button>
                        )}
                        <button
                            onClick={onRestart}
                            className="py-3 px-6 bg-blue-500 text-white font-bold rounded-xl shadow-lg transition duration-300 hover:bg-blue-600 text-lg active:scale-98"
                        >
                            Làm lại
                        </button>
                    </div>
                </div>
            );
        };

        // --- NEW Component: ReviewScreen.tsx ---
        const ReviewScreen = ({ incorrectAnswers, onBack }) => {
            return (
                <div className="fade-in p-4">
                    <header className="mb-6 text-center">
                         <h2 className="text-3xl font-extrabold text-blue-600 mb-2">Xem lại các câu sai</h2>
                    </header>
                    <div className="space-y-8">
                        {incorrectAnswers.map(({ question, submittedAnswer }, index) => (
                             <div key={index} className="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                                {question.type === 'mc' && <MultipleChoiceQuestion question={question} isAnswered={true} onSubmit={() => {}} showMessage={() => {}} questionIndex={question.originalIndex + 1} />}
                                {question.type === 'fill-in-the-blank' && <FillInTheBlankQuestion question={question} isAnswered={true} onSubmit={() => {}} showMessage={() => {}} questionIndex={question.originalIndex + 1} />}
                                {question.type === 'rearrange' && <RearrangeQuestion question={question} isAnswered={true} onSubmit={() => {}} showMessage={() => {}} questionIndex={question.originalIndex + 1} isCorrect={false} />}
                                {question.type === 'multimedia' && (
                                     (question.options && question.options.length > 0) 
                                     ? <MultipleChoiceQuestion question={question} isAnswered={true} onSubmit={() => {}} showMessage={() => {}} questionIndex={question.originalIndex + 1} />
                                     : <FillInTheBlankQuestion question={question} isAnswered={true} onSubmit={() => {}} showMessage={() => {}} questionIndex={question.originalIndex + 1} />
                                )}
                                <RationaleBox question={question} isCorrect={false} submittedAnswer={submittedAnswer} />
                             </div>
                        ))}
                    </div>
                     <div className="mt-8 text-center">
                        <button
                            onClick={onBack}
                            className="py-3 px-6 bg-blue-500 text-white font-bold rounded-xl shadow-lg transition duration-300 hover:bg-blue-600 text-lg active:scale-98"
                        >
                           Quay lại màn hình điểm
                        </button>
                    </div>
                </div>
            )
        }
        
        // --- Component: QuizScreen.tsx ---
        const QuizScreen = ({ playerName, onEnd }) => {
            const [shuffledQuestions, setShuffledQuestions] = React.useState([]);
            const [currentQuestionIndex, setCurrentQuestionIndex] = React.useState(0);
            const [score, setScore] = React.useState(0);
            const [isAnswered, setIsAnswered] = React.useState(false);
            const [isCorrect, setIsCorrect] = React.useState(false);
            const [submittedAnswer, setSubmittedAnswer] = React.useState('');
            const [isHintVisible, setIsHintVisible] = React.useState(false);
            const [message, setMessage] = React.useState(null);
            const [incorrectAnswers, setIncorrectAnswers] = React.useState([]);
            
            const originalQuestions = React.useMemo(() => questions.map((q, index) => ({...q, originalIndex: index})), []);

            React.useEffect(() => {
                setShuffledQuestions([...originalQuestions].sort(() => Math.random() - 0.5));
            }, []);

            const currentQuestion = shuffledQuestions[currentQuestionIndex];

            React.useEffect(() => {
                setIsAnswered(false);
                setIsCorrect(false);
                setSubmittedAnswer('');
                setIsHintVisible(false);
                setMessage(null);
            }, [currentQuestionIndex]);
            
            const showMessage = (text, type) => {
                setMessage({ text, type });
            };

            const handleSubmit = React.useCallback((answer, isAnswerCorrect) => {
                if (isAnswered) return;
                
                setIsAnswered(true);
                setSubmittedAnswer(answer);
                setIsCorrect(isAnswerCorrect);

                if (isAnswerCorrect) {
                    setScore(prev => prev + 10);
                    showMessage('CHÍNH XÁC! +10 điểm', 'success');
                } else {
                    showMessage('SAI RỒI! Hãy xem lại nhé', 'error');
                    setIncorrectAnswers(prev => [...prev, { question: currentQuestion, submittedAnswer: answer }]);
                }
            }, [isAnswered, currentQuestion]);

            const handleNext = () => {
                if (currentQuestionIndex < shuffledQuestions.length - 1) {
                    setCurrentQuestionIndex(prev => prev + 1);
                } else {
                    onEnd(score, incorrectAnswers);
                }
            };

            if (!currentQuestion) {
                return <div className="text-center p-8">Đang tải câu hỏi...</div>;
            }

            const progressPercentage = ((currentQuestionIndex + 1) / questions.length) * 100;
            
            const renderQuestionComponent = () => {
                const commonProps = {
                    question: currentQuestion,
                    isAnswered,
                    onSubmit: handleSubmit,
                    showMessage,
                    questionIndex: currentQuestion.originalIndex + 1,
                    isCorrect: isCorrect, 
                };

                switch (currentQuestion.type) {
                    case 'rearrange':
                        return <RearrangeQuestion {...commonProps} />;
                    case 'mc':
                         return <MultipleChoiceQuestion {...commonProps} />;
                    case 'fill-in-the-blank':
                         return <FillInTheBlankQuestion {...commonProps} />;
                    case 'multimedia':
                        // Intelligent routing for multimedia questions
                        if (currentQuestion.options && currentQuestion.options.length > 0) {
                            return <MultipleChoiceQuestion {...commonProps} />;
                        }
                        return <FillInTheBlankQuestion {...commonProps} />;
                    default:
                        return <div className="text-red-500">Lỗi: Loại câu hỏi không xác định.</div>;
                }
            };

            return (
                <div className="fade-in">
                    {message && <MessageBox message={message.text} type={message.type} />}
                    <header className="text-center mb-8">
                        <h1 className="text-2xl sm:text-3xl font-extrabold text-blue-600 mb-2">BỘ ĐỀ ÔN IOE K6 SỐ: 01.1</h1>
                        <ProgressBar percentage={progressPercentage} />
                    </header>

                    <div className="flex justify-between items-center mb-6 py-2 px-4 bg-blue-50 rounded-xl shadow-inner border border-blue-100">
                        <p className="text-sm sm:text-base font-medium text-blue-800">Người chơi: <span className="font-bold">{playerName}</span></p>
                        <p className="text-sm sm:text-base font-medium text-blue-800">Điểm: <span className="text-xl font-extrabold text-red-600">{score}</span></p>
                        <p className="text-sm sm:text-base font-medium text-blue-800">Câu: <span className="font-bold">{currentQuestionIndex + 1}/{questions.length}</span></p>
                    </div>

                    <div className="mb-8">
                        {renderQuestionComponent()}
                    </div>

                    <div className="mt-8 border-t pt-6 flex justify-between items-center flex-wrap gap-4">
                        <div className="relative">
                            <button
                                className="bg-yellow-500 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 hover:bg-yellow-600 active:scale-95"
                                onMouseEnter={() => setIsHintVisible(true)}
                                onMouseLeave={() => setIsHintVisible(false)}
                            >
                                Gợi ý
                            </button>
                            <div className={`absolute bottom-full mb-2 w-max max-w-[80vw] sm:max-w-sm p-4 bg-yellow-100 border-l-4 border-yellow-500 rounded-xl transition-opacity duration-300 transform ${isHintVisible ? 'opacity-100 scale-100' : 'opacity-0 scale-90 pointer-events-none'}`}>
                                <p className="font-semibold text-yellow-800">{currentQuestion.hint_vi || 'Không có gợi ý.'}</p>
                            </div>
                        </div>
                        
                        <button onClick={handleNext} disabled={!isAnswered} className="flex-grow py-3 px-4 bg-blue-500 text-white font-bold rounded-xl shadow-xl transition duration-300 hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed active:scale-98">
                            {currentQuestionIndex === shuffledQuestions.length - 1 ? 'Hoàn thành' : 'Câu tiếp theo'}
                        </button>
                    </div>

                    {isAnswered && (
                        <RationaleBox question={currentQuestion} isCorrect={isCorrect} submittedAnswer={submittedAnswer} />
                    )}
                </div>
            );
        };
        
        // --- Component: App.tsx ---
        const App = () => {
            const [gameState, setGameState] = React.useState('start');
            const [playerName, setPlayerName] = React.useState('');
            const [score, setScore] = React.useState(0);
            const [incorrectAnswers, setIncorrectAnswers] = React.useState([]);

            const handleStartQuiz = React.useCallback((name) => {
                setPlayerName(name);
                setScore(0);
                setIncorrectAnswers([]);
                setGameState('quiz');
            }, []);

            const handleEndQuiz = React.useCallback((finalScore, mistakes) => {
                setScore(finalScore);
                setIncorrectAnswers(mistakes);
                setGameState('end');
            }, []);
            
            const handleRestartQuiz = React.useCallback(() => {
                setGameState('start');
            }, []);

            const handleReview = React.useCallback(() => {
                setGameState('review');
            }, []);

            const handleBackToEnd = React.useCallback(() => {
                setGameState('end');
            }, []);

            const renderContent = () => {
                switch (gameState) {
                    case 'start':
                        return <StartScreen onStart={handleStartQuiz} />;
                    case 'quiz':
                        return <QuizScreen playerName={playerName} onEnd={handleEndQuiz} />;
                    case 'end':
                        return <EndScreen playerName={playerName} score={score} onRestart={handleRestartQuiz} onReview={handleReview} incorrectAnswers={incorrectAnswers} />;
                    case 'review':
                        return <ReviewScreen incorrectAnswers={incorrectAnswers} onBack={handleBackToEnd} />;
                    default:
                        return <StartScreen onStart={handleStartQuiz} />;
                }
            };

            return (
                <div className="p-4 sm:p-8 flex justify-center items-start min-h-screen">
                    <div className="w-full max-w-3xl bg-white rounded-xl shadow-2xl p-6 sm:p-8 md:p-10 border border-gray-100 min-h-[80vh]">
                        {renderContent()}
                    </div>
                </div>
            );
        };
        
        // --- Entry point ---
        const rootElement = document.getElementById('root');
        const root = ReactDOM.createRoot(rootElement);
        root.render(<React.StrictMode><App /></React.StrictMode>);

    </script>
</body>
</html>
